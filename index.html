<!DOCTYPE html>
<html>
	<head>
		<title>This is slerpy</title>

		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
		<link href="favicon.png" rel="icon">

		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
		<meta charset="utf-8">

		<script id="vsh" type="x-shader/x-vertex">
			precision mediump float;

			attribute vec3 pos;
			varying vec2 uv;

			void main(void) {
				uv = pos.xy;
				gl_Position = vec4(pos, 1);
			}
		</script>

		<script id="fsh" type="x-shader/x-fragment">
			precision mediump float;

			uniform float time;
			uniform float aspect;
			varying vec2 uv;

			mat2 rot(float a)
			{
				float s=sin(a), c=cos(a);
				return mat2(s, c, -c, s);
			}

			float cube(vec3 p)
			{
				return length(max(abs(p)-.5, 0.));
			}

			float map(vec3 p)
			{
				float d = cube(p);

				mat2 rm = rot(-time/3. + length(p));
				p.xy *= rm, p.zy *= rm;

				p = abs(p) - time;
				p = abs(p - floor(p + 0.5));

				rm = rot(time);
				p.xy *= rm, p.xz *= rm;

				return min(d, min(min(length(p.xy), length(p.yz)), length(p.xz)) + .01);
			}

			void main(void)
			{
				vec2 u = uv * vec2(aspect, 1);
				vec3 rd = normalize(vec3(u, 1));
				vec3 ro = vec3(0, 0, -2);

				mat2 r1 = rot(time/4.), r2 = rot(time/2.);
				rd.xz *= r1, ro.xz *= r1, rd.yz *= r2, ro.yz *= r2;

				vec3 p;
				float m, t = .0;
				const int iter = 20;
				float fade = 1.0 - exp(-0.2 * time - 0.1);

				for(int i=0; i<iter; i++)
				{
					p = ro + rd * t;
					m = map(p);
					t += 0.45 * fade * m;
					if(m < 0.01)break;
				}

				float burn = pow(cube(p)-m, 2.);

				gl_FragColor.xyz = fade * vec3(1.-burn, exp(-t), exp(-t/2.));
				gl_FragColor.w = 1.0;
			}
		</script>

		<script type="text/javascript" src="gl-matrix-min.js"></script>
		<script type="text/javascript" src="webgl-code.js"></script>

		<style>
			.fg {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
			}

			.bg {
				position: fixed;
				top: 50%;
				left: 50%;
				z-index: -100;
				-ms-transform: translateX(-50%) translateY(-50%);
				-moz-transform: translateX(-50%) translateY(-50%);
				-webkit-transform: translateX(-50%) translateY(-50%);
				transform: translateX(-50%) translateY(-50%);
				background-size: cover;
			}

			#bg-still {
				min-width: 100%;
				min-height: 100%;
				visibility: hidden;
			}

			#bg-live {
				width: 100%;
				height: 100%;
				visibility: visible;
			}

			@media screen and (max-width:800px) {
				#bg-still { visibility: visible; }
				#bg-live { visibility: hidden; }
			}

			.wrapper {
				margin: 32px auto;
				padding: 0px 16px;
				width: 38em;
				height: auto;
			}

			.text {
				margin-top:0px;
				margin-bottom:0px;
				text-align: justify;
				font-family: 'Roboto', sans-serif;
				color: #FFFFFF;
			}

			a {
				font-size: 20px;
				margin-right: 10px;
				text-decoration: underline;
			}

			a:hover {
				text-decoration: none;
			}
		</style>
	</head>

	<body onload="setupWebGL();">

		<img src="preview.png" class="bg" id="bg-still">
		<canvas class="bg" id="bg-live"></canvas>

		<div class="fg">
			<div class="wrapper">

				<h1 class="text" style="font-size: 160px;">slerpy</h1>
				<h2 class="text" style="font-size: 40px">/'sləːpi/ (always lowercase)</h2>

				<br>

				<p class="text" style="font-size: 20px;">If you're reading this, you've found my official website for anything demoscene related. The links below bring you to my social media and some of the things I've worked on. In case you want to contact me, you can do so on IRCnet or Twitter.</p>

				<br>

				<a class="text" href="https://www.pouet.net/user.php?who=101602">Pouët</a>
				<a class="text" href="https://github.com/slerpyyy">Github</a>
				<a class="text" href="https://www.shadertoy.com/user/slerpy">Shadertoy</a>
				<a class="text" href="https://demozoo.org/sceners/79080/">Demozoo</a>
				<a class="text" href="https://twitter.com/slerpy_">Twitter</a>

			</div>
		</div>
	</body>
</html>
